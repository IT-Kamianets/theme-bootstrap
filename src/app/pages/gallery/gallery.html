<main class="gallery">
	<section class="bg-white border-bottom">
		<div class="container-lg px-4 py-5 py-lg-6">
			<div
				class="d-flex flex-column gap-3 flex-lg-row align-items-lg-end justify-content-lg-between"
			>
				<div>
					<nav aria-label="breadcrumb" class="mb-2">
						<ol class="breadcrumb mb-0 small">
							<li class="breadcrumb-item"><a routerLink="/home">Home</a></li>
							<li class="breadcrumb-item active" aria-current="page">Gallery</li>
						</ol>
					</nav>
					<h1 class="display-6 fw-bold mb-2">Gallery</h1>
					<p class="text-secondary mb-0">
						A curated set of visual studies across multiple themes.
					</p>
				</div>
				<span class="badge text-bg-light border text-secondary">
					{{ filteredItems.length }} items
				</span>
			</div>

			<div class="card border rounded-4 shadow-sm bg-body-tertiary mt-4 gallery-filters">
				<div class="card-body p-4">
					<div class="row g-3 g-lg-4 align-items-end">
						<div class="col-12 col-md-7">
							<label
								class="form-label small fw-semibold text-secondary"
								for="gallerySearch"
							>
								Search
							</label>
							<input
								id="gallerySearch"
								type="text"
								class="form-control"
								placeholder="Search images"
								[(ngModel)]="searchTerm"
								(ngModelChange)="onFiltersChanged()"
							/>
						</div>
						<div class="col-12 col-md-5">
							<label
								class="form-label small fw-semibold text-secondary"
								for="galleryCategory"
							>
								Category
							</label>
							<select
								id="galleryCategory"
								class="form-select"
								[(ngModel)]="selectedCategory"
								(ngModelChange)="onFiltersChanged()"
							>
								<option *ngFor="let category of categories" [value]="category">
									{{ category }}
								</option>
							</select>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<section class="bg-light">
		<div class="container-lg px-4 py-5 py-lg-6">
			<div class="row g-3 g-lg-4 gallery-grid" *ngIf="hasResults; else noResults">
				<div class="col-12 col-sm-6 col-lg-4 col-xl-3" *ngFor="let item of pagedItems">
					<div class="card border rounded-4 h-100 shadow-sm">
						<img
							[src]="item.imageUrl"
							class="card-img-top"
							[alt]="item.title"
							loading="lazy"
						/>
						<div class="card-body p-4 d-flex flex-column">
							<h2 class="h5 fw-semibold mb-1">{{ item.title }}</h2>
							<p class="small text-secondary mb-3">{{ item.subtitle }}</p>
							<div class="d-flex flex-wrap gap-2 mb-3">
								<span
									class="badge text-bg-light border text-secondary"
									*ngFor="let tag of item.tags"
								>
									{{ tag }}
								</span>
							</div>
							<div class="mt-auto d-flex justify-content-between align-items-center">
								<small class="text-secondary">Updated today</small>
								<a
									class="btn btn-sm btn-outline-secondary fw-semibold"
									[href]="item.imageUrl"
									target="_blank"
									rel="noopener"
								>
									Open
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<ng-template #noResults>
				<div class="card border rounded-4 shadow-sm">
					<div class="card-body p-4 text-center">
						<p class="fw-semibold mb-1">No results</p>
						<p class="text-secondary mb-0">Try adjusting your search or category.</p>
					</div>
				</div>
			</ng-template>

			<nav class="mt-4 mt-lg-5" aria-label="Gallery pagination" *ngIf="hasResults">
				<ul class="pagination justify-content-center mb-0">
					<li class="page-item" [class.disabled]="currentPage === 1">
						<button
							class="page-link"
							type="button"
							[disabled]="currentPage === 1"
							(click)="prevPage()"
						>
							Previous
						</button>
					</li>
					<li
						class="page-item"
						[class.active]="page === currentPage"
						*ngFor="let page of pageNumbers"
					>
						<button class="page-link" type="button" (click)="goToPage(page)">
							{{ page }}
						</button>
					</li>
					<li class="page-item" [class.disabled]="currentPage === totalPages">
						<button
							class="page-link"
							type="button"
							[disabled]="currentPage === totalPages"
							(click)="nextPage()"
						>
							Next
						</button>
					</li>
				</ul>
			</nav>
		</div>
	</section>
</main>
